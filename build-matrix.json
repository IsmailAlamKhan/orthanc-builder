{
  "integrationTests": {
    "comment": "# CHANGE_ORTHANC_TESTS_VERSION",
    "stable": "default",
    "unstable": "default"
  },
  "configs": [
    {
      "name": "XXXXX Sample configuration for documentation to list all fields",
      "repo": "https://orthanc.uclouvain.be/hg/orthanc/    path to repo",
      "repoType": "hg                                    or git",
      "sourcesSubPath": "/OrthancServer                  OPTIONAL path to CMakeLists.txt",
      "comment": "# CHANGE_VERSION_XXX",
      "stable": "XXX-1.1                                 Name of the stable branch/tag: used by Docker/Win/OSX if not overriden",
      "unstable": "default                               Name of the unstable branch: used by Docker/Win/OSX if not overriden",
      "stableOSX": "4b8fd4b10742                         OPTIONAL specific stable branch/tag for OSX",
      "unstableOSX": "4b8fd4b10742                       OPTIONAL specific unstable branch/tag for OSX",
      "stableDocker": "4b8fd4b10742                      OPTIONAL specific stable branch/tag for Docker",
      "unstableDocker": "4b8fd4b10742                    OPTIONAL specific unstable branch/tag for Docker",
      "artifactsOSX": "libOrthancGdcm.dylib libZZ.dylib  list of space separated artifacts for OSX",
      "preBuildWin": "                                   OPTIONAL custom pre-build step for OSX",
      "preBuildStableOSX": "                             OPTIONAL custom pre-build step for OSX",
      "preBuildUnstableOSX": "                           OPTIONAL custom pre-build step for OSX",
      "customBuildOSX": "                                OPTIONAL custom pre-build step for OSX",
      "unitTests": "./UnitTests                          OPTIONAL",
      "extraCMakeFlags": "-DORTHANC_SDK_VERSION=1.9.2    OPTIONAL",
      "buildForOSX": false,
      "windows": [
        {
          "Exclude": true,
          "Description": "Osimis Web viewer (AGPL license)",
          "Name": "osimis_web_viewer",
          "Mandatory": false,
          "CheckedComment": "true by default, false if you do not want to install the plugin by default",
          "Checked": false,
          "Category": "osimis",
          "Artifacts64": [
            [
              "OsimisWebViewer 1.4.2 - VC2015-64 Release/OsimisWebViewer.dll",
              "Plugins",
              "Comment: # CHANGE_VERSION_WVB"
            ]
          ],
          "Resources": [["webviewer.json", "Configuration"]]
        }
      ]
    },
    {
      "name": "Orthanc",
      "repo": "https://orthanc.uclouvain.be/hg/orthanc/",
      "repoType": "hg",
      "sourcesSubPath": "/OrthancServer",
      "comment": "# CHANGE_VERSION_ORTHANC",
      "stable": "Orthanc-1.12.1",
      "unstable": "default",
      "stableOSX": "Orthanc-1.12.1",
      "artifactsOSX": "Orthanc libModalityWorklists.dylib libServeFolders.dylib libConnectivityChecks.dylib libHousekeeper.dylib libDelayedDeletion.dylib libMultitenantDicom.dylib",
      "unstableArtifactsOSX": "Orthanc libModalityWorklists.dylib libServeFolders.dylib libConnectivityChecks.dylib libHousekeeper.dylib libDelayedDeletion.dylib libMultitenantDicom.dylib",
      "extraCMakeFlagsOSX": "-DUSE_LEGACY_BOOST=ON -DUSE_LEGACY_LIBICU=ON -DBOOST_LOCALE_BACKEND=icu",
      "unitTests": "./UnitTests",
      "buildForOSX": true,
      "windows": [
        {
          "Description": "Orthanc server",
          "Mandatory": true,
          "Artifacts64": [
            ["windows-64/orthanc/${VERSION}/Orthanc.exe", "", "Comment: # CHANGE_VERSION_ORTHANC"]
          ],
          "Artifacts32": [
            ["windows-32/orthanc/${VERSION}/Orthanc.exe", "", "Comment: # CHANGE_VERSION_ORTHANC"]
          ]
        }
      ],
      "downloadsOSX": [
        {
          "url": "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/Orthanc",
          "executable": true
        },
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/ConnectivityChecks.dylib",
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/DelayedDeletion.dylib",
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/Housekeeper.dylib",
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/ModalityWorklists.dylib",
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/MultitenantDicom.dylib",
        "https://orthanc.uclouvain.be/downloads/macos/orthanc/${VERSION}/ServeFolders.dylib"
      ]
    },

    {
      "name": "Orthanc-explorer-2",
      "repo": "https://github.com/orthanc-server/orthanc-explorer-2/",
      "repoType": "git",
      "comment": "# CHANGE_VERSION_ORTHANC_EXPLORER_2",
      "stable": "1.1.3",
      "unstable": "master",
      "unstableOSX": "1.1.3",
      "comment2": "this plugin has its own build process on Github -> OSX and Win64 are built by Github",
      "buildForOSX": false,
      "artifactsOSX": "libOrthancExplorer2-universal.dylib",
      "rootDownloadForOSX": "https://github.com/orthanc-server/orthanc-explorer-2/releases/download/",
      "windows": [
        {
          "Description": "Orthanc Explorer 2 User Interface",
          "Mandatory": true,
          "Category": "plugins",
          "Comment": "Win64 is coming from Github while Win32 is coming from buildbot",

          "Downloads64": [
            [
              "https://github.com/IsmailAlamKhan/orthanc-explorer-2/releases/download/1.1.4/OrthancExplorer2-win64.dll",
              "Plugins"
            ]
          ],
          "Artifacts32": [
            [
              "windows-32/orthanc-explorer-2/OrthancExplorer2-${VERSION}.dll",
              "Plugins",
              "Comment: # CHANGE_VERSION_ORTHANC_EXPLORER_2"
            ]
          ],
          "Resources": [["orthanc-explorer-2.json", "Configuration"]]
        }
      ],
      "downloadsOSX": [
        "https://orthanc.uclouvain.be/downloads/macos/orthanc-explorer-2/OrthancExplorer2-${VERSION}.dylib"
      ]
    },

    {
      "name": "Orthanc-ohif",
      "repo": "https://orthanc.uclouvain.be/hg/orthanc-ohif/",
      "repoType": "hg",
      "comment": "# CHANGE_VERSION_OHIF",
      "stable": "OrthancOHIF-1.1",
      "unstable": "default",
      "artifactsOSX": "libOrthancOHIF.dylib",
      "buildForOSX": false,
      "extraCMakeFlagsOSX": "-DUSE_LEGACY_BOOST=ON",
      "preBuildStableOSX": "TODO viewer=Viewers-3.6.0 && rm -rf /tmp/downloads/ && mkdir -p /tmp/downloads && wget https://orthanc.uclouvain.be/third-party-downloads/OHIF/$viewer.tar.gz --output-document /tmp/downloads/dist.tar.gz --quiet && mkdir -p /tmp/ohif && tar xvf /tmp/downloads/dist.tar.gz -C /tmp/ohif && cd /tmp/ohif/$viewer && npm install &&  mkdir -p ${GITHUB_WORKSPACE}/source/OHIF && cp -r /tmp/ohif",
      "preBuildUnstableOSX": "TODO rm -rf /tmp/downloads/ && mkdir -p /tmp/downloads && wget https://orthanc.uclouvain.be/third-party-downloads/OHIF/Viewers-3.6.0.tar.gz --output-document /tmp/downloads/dist.tar.gz --quiet && mkdir -p ${GITHUB_WORKSPACE}/OHIF/dist",
      "windows": [
        {
          "Description": "OHIF plugin for Orthanc",
          "Mandatory": false,
          "Category": "plugins",
          "Artifacts64": [
            [
              "windows-64/orthanc-ohif/OrthancOHIF-${VERSION}.dll",
              "Plugins",
              "Comment: # CHANGE_VERSION_OHIF"
            ]
          ],
          "Artifacts32": [
            [
              "windows-32/orthanc-ohif/OrthancOHIF-${VERSION}.dll",
              "Plugins",
              "Comment: # CHANGE_VERSION_OHIF"
            ]
          ],
          "Resources": []
        }
      ],
      "downloadsOSX": [
        "https://orthanc.uclouvain.be/downloads/macos/orthanc-ohif/OrthancOHIF-${VERSION}.dylib"
      ]
    }
  ]
}
